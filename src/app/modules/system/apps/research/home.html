<div nz-row nzGutter="16">
    <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
        <div nz-row nzType="flex" nzAlign="middle" class="bg-primary rounded-md">
            <div nz-col nzSpan="12" class="p-md text-white">
                <div class="h2 mt0">12</div>
                <p class="text-nowrap">内部常模</p>
            </div>
        </div>
    </div>
    <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
        <div nz-row nzType="flex" nzAlign="middle" class="bg-success rounded-md">
            <div nz-col nzSpan="12" class="p-md text-white">
                <div class="h2 mt0">12</div>
                <p class="text-nowrap">自定义常模</p>
            </div>
        </div>
    </div>
    <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
        <div nz-row nzType="flex" nzAlign="middle" class="bg-orange rounded-md">
            <div nz-col nzSpan="12" class="p-md text-white">
                <div class="h2 mt0">33</div>
                <p class="text-nowrap">组合问卷</p>
            </div>
        </div>
    </div>
    <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
        <div nz-row nzType="flex" nzAlign="middle" class="bg-pink rounded-md">
            <div nz-col nzSpan="12" class="p-md text-white">
                <div class="h2 mt0">44</div>
                <p class="text-nowrap">趋势报表</p>
            </div>
        </div>
    </div>
</div>

<div nz-row [nzGutter]="24">
    <div nz-col nzXs="24" nzSm="24">
        <nz-card [nzLoading]="loading" [nzBordered]="false" nzTitle="调研活动答题进度" [nzBodyStyle]="{'padding': '0 0 32px'}">
            <ng-template #body>
                <nz-tabset [(nzSelectedIndex)]="_activeTab" (nzSelectChange)="_tabChange($event)">
                    <nz-tab *ngFor="let tab of winning.chartdata; let i = index;">
                        <ng-template #nzTabHeading>
                            <div nz-row [nzGutter]="8" style="width: 138px; margin: 8px 0">
                                <div nz-col [nzSpan]="12">
                                    <number-info [title]="tab.name" subTitle="应答率" gap="2" [total]="(tab.cvr * 100) + '%'" [theme]="i !== _activeTab && 'light'"></number-info>
                                </div>
                                <div nz-col [nzSpan]="12" style="padding-top: 36px">
                                    <pie [animate]="false" [color]="i !== _activeTab && '#BDE4FF'" [inner]="0.55" [tooltip]="false" [margin]="[0, 0, 0, 0]" [percent]="tab.cvr * 100"
                                        [height]="64">
                                    </pie>
                                </div>
                            </div>
                        </ng-template>
                        <div class="px-lg">
                            <nz-table #keyTable [nzIsPagination]="false" [nzDataSource]="tab.listdata"  nzSize="small">
                                <thead nz-thead>
                                    <tr>
                                        <th nz-th><span>统计列</span></th>
                                        <th nz-th><span>发放数量</span></th>
                                        <th nz-th><span>应答数量</span></th>
                                        <th nz-th><span>未达数量</span></th>
                                        <th nz-th><span>应答率(%)</span></th>
                                    </tr>
                                </thead>
                                <tbody nz-tbody>
                                    <tr nz-tbody-tr *ngFor="let item of keyTable.data">
                                        <td nz-td>{{item.empname}}</td>
                                        <td nz-td>{{item.empcode}}</td>
                                        <td nz-td>{{item.redeemcode}}</td>
                                        <td nz-td>{{item.prize}}</td>
                                        <td nz-td>{{item.status}}</td>
                                    </tr>
                                </tbody>
                            </nz-table>
                        </div>
                    </nz-tab>
                </nz-tabset>
            </ng-template>
        </nz-card>
    </div>
</div>